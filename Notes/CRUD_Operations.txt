CRUD OPERATIONS IN THIS PROJECT
================================

1) Definitions
--------------
CRUD = **Create, Read, Update, Delete**. These are the four basic operations on data.

- **Create**: Add new data (e.g., create a product, user, order, review, notification).
- **Read**: Fetch data (e.g., list products, get order by id).
- **Update**: Modify existing data (e.g., change product price, update order status).
- **Delete**: Remove data (e.g., delete a product, delete a review).

In Mongoose/MongoDB, common methods are:
- `Model.create()` / `new Model().save()` → Create
- `Model.find()`, `Model.findById()` → Read
- `Model.findByIdAndUpdate()`, `Model.updateMany()` → Update
- `Model.findByIdAndDelete()`, `Model.deleteMany()` → Delete


2) Examples from your project (file + code)
-------------------------------------------

A) PRODUCTS (`Backend/Controller/product_controller.js`)

**Create (C)** – `createProduct`

```js
// POST /api/products
export const createProduct = async (req, res) => {
  const userProduct = req.body;

  if (!userProduct.name || !userProduct.price || !userProduct.image) {
    return res.status(400).json({ success: false, message: "Required Fields are missing." });
  }

  const newProduct = new productModel(userProduct);
  try {
    await newProduct.save();
    res.status(201).json({
      success: true,
      message: "Product Created Successfully",
      product: newProduct,
    });
  } catch (error) {
    res.status(500).json({ success: false, message: error.message || "Internal Server Error" });
  }
};
```

**Read (R)** – `getProducts`

```js
// GET /api/products
export const getProducts = async (req, res) => {
  try {
    const data = await productModel.find({});
    res.status(200).json({
      success: true,
      message: "Products fetched successfully",
      products: data,
    });
  } catch (error) {
    res.status(500).json({ success: false, message: "Internal Server Error" });
  }
};
```

**Update (U)** – `updateProduct`

```js
// PUT /api/products/:id
export const updateProduct = async (req, res) => {
  const { id: userProductId } = req.params;
  const userProduct = req.body;

  if (!mongoose.Types.ObjectId.isValid(userProductId)) {
    return res.status(400).json({ success: false, message: "Invalid Product Id" });
  }

  // Simplified (non-transaction path):
  const updatedProduct = await productModel.findByIdAndUpdate(
    userProductId,
    userProduct,
    { new: true, runValidators: true }
  );

  res.status(200).json({
    success: true,
    message: "Product Updated Successfully",
    product: updatedProduct,
  });
};
```

**Delete (D)** – `deleteProduct`

```js
// DELETE /api/products/:id
export const deleteProduct = async (req, res) => {
  const { id: userProductId } = req.params;

  try {
    const deletedProduct = await productModel.findByIdAndDelete(userProductId);
    if (!deletedProduct) {
      return res.status(404).json({ success: false, message: "Product not found" });
    }
    res.status(200).json({
      success: true,
      message: "Product Deleted Successfully",
      product: deletedProduct,
    });
  } catch (error) {
    res.status(500).json({ success: false, message: "Such Id Doesnot Exist" });
  }
};
```


B) ORDERS (`Backend/Controller/order_controller.js`)

**Create (C)** – `createOrder` (uses transaction)

```js
// POST /api/orders
export const createOrder = async (req, res) => {
  const orderData = req.body;

  const session = await mongoose.startSession();

  try {
    await session.withTransaction(async () => {
      // reserve stock, then:
      const [newOrder] = await Order.create([orderData], { session });
      // create notifications, etc.
    });

    const createdOrder = await Order.findOne({ userId: orderData.userId }).sort({ createdAt: -1 });

    res.status(201).json({
      success: true,
      message: "Order placed successfully!",
      order: createdOrder,
    });
  } catch (error) {
    res.status(500).json({ success: false, message: error.message || "Server Error" });
  } finally {
    session.endSession();
  }
};
```

**Read (R)** – `getAllOrders`, `getOrderById`

```js
// GET /api/orders
export const getAllOrders = async (req, res) => {
  try {
    const orders = await Order.find({}).sort({ createdAt: -1 });
    res.status(200).json({
      success: true,
      count: orders.length,
      data: orders,
    });
  } catch (error) {
    res.status(500).json({ success: false, message: "Server Error" });
  }
};

// GET /api/orders/:id
export const getOrderById = async (req, res) => {
  const { id } = req.params;
  const order = await Order.findById(id);
  // handle not found, then:
  res.status(200).json({ success: true, data: order });
};
```

**Update (U)** – `updateOrderStatus`

```js
// PUT /api/orders/:id
export const updateOrderStatus = async (req, res) => {
  const { id } = req.params;
  const { status } = req.body;

  const updatedOrder = await Order.findByIdAndUpdate(
    id,
    { status },
    { new: true, runValidators: true }
  );

  res.status(200).json({
    success: true,
    message: "Order status updated successfully",
    data: updatedOrder,
  });
};
```

**Delete (D)** – `deleteOrder`

```js
// DELETE /api/orders/:id
export const deleteOrder = async (req, res) => {
  const { id } = req.params;

  const deletedOrder = await Order.findByIdAndDelete(id);

  res.status(200).json({
    success: true,
    message: "Order deleted successfully",
    data: deletedOrder,
  });
};
```


C) USERS / AUTH (`Backend/Controller/auth_controller.js`)

**Create (C)** – `signup`

```js
// POST /api/auth/signup
export const signup = async (req, res) => {
  const { name, email, password } = req.body;

  const user = await User.create({
    name,
    email,
    password,
  });

  // send token + response
};
```

**Read (R)** – `getMe`

```js
// GET /api/auth/me
export const getMe = async (req, res) => {
  const user = await User.findById(req.user._id);
  res.status(200).json({ success: true, user });
};
```

**Update (U)** – `updateProfile`

```js
// PUT /api/auth/update-profile
export const updateProfile = async (req, res) => {
  const { name, phone, avatar } = req.body;

  const fieldsToUpdate = {};
  if (name) fieldsToUpdate.name = name;
  if (phone) fieldsToUpdate.phone = phone;
  if (avatar) fieldsToUpdate.avatar = avatar;

  const user = await User.findByIdAndUpdate(
    req.user._id,
    fieldsToUpdate,
    { new: true, runValidators: true }
  );

  res.status(200).json({
    success: true,
    message: "Profile updated successfully",
    user,
  });
};
```

**Delete (D)** – `deleteAccount`

```js
// DELETE /api/auth/delete-account
export const deleteAccount = async (req, res) => {
  const user = await User.findById(req.user._id).select("+");

  // (optional) delete related orders/reviews here
  await User.findByIdAndDelete(user._id);

  res.status(200).json({
    success: true,
    message: "Account deleted successfully",
  });
};
```


D) REVIEWS (`Backend/Controller/review_controller.js`)

- **Create**: `createReview` uses `Review.create()`
- **Read**: functions that use `Review.find()` / `Review.findById()`
- **Update**: `Review.findByIdAndUpdate(...)`
- **Delete**: `Review.findByIdAndDelete(id)`


E) NOTIFICATIONS (`Backend/Controller/notification_controller.js`)

- **Create**: `Notification.create()` and `createNotificationHelper()`
- **Read**: `Notification.find()` to get user notifications
- **Update**: `Notification.updateMany()` to mark as read
- **Delete**: `Notification.deleteMany()` or `findOneAndDelete()`


F) SETTINGS (`Backend/Controller/settings_controller.js`)

- **Create**: `Settings.create({ ... })` when initializing/resetting settings
- **Read**: `Settings.findOne()` to load settings
- **Update**: `Settings.findOneAndUpdate()` to change settings
- **Delete**: `Settings.deleteMany({})` when resetting


3) Summary
----------

- **CRUD is used across almost every controller**:
  - `product_controller.js` → products
  - `order_controller.js` → orders
  - `auth_controller.js` → users
  - `review_controller.js` → reviews
  - `notification_controller.js` → notifications
  - `settings_controller.js` → admin settings

Your project is a classic RESTful API where almost every route maps directly to one of the CRUD operations on Mongoose models.
